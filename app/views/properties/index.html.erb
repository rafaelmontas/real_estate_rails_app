<section class="section">

  <div class="navbar navbar-static facet-bar affix-top">
    <div class="container facet-bar-container">
      <%= search_form_for @q do |f| %>
        <div class="float-left facet-location">
          <div class="form-group facet-search-wrapper">
            <div class="input-group search-input-group">
              <%= f.text_field :location_cont, placeholder: "Sector...", class: "form-control" %>
              <span class="input-group-btn">
                <button class="btn btn-primary">
                  <%= fa_icon "search" %>
                </button>
              </span>
            </div>
          </div>
        </div>
        <ul class="nav navbar-nav facet-options-list float-left">
          <li class="dropdown facet-price hidden-xxs">
            <a href="#" class="dropdown-toggle drop-menu" data-toggle="dropdown" aria-expanded="false">
              <span>Precio</span>
              <%= fa_icon "caret-down" %>
            </a>
            <ul class="dropdown-menu dropdown-price js-prevent-dropdown-close">
              <li>
                <div class="clearfix facet-price-form">
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="facet-price-wrap">
                        <%= f.select :price_gteq, [['$us Minimo', 100000],
                                                   ['$us 100,000', 100000],
                                                   ['$us 200,000', 200000],
                                                   ['$us 300,000', 300000],
                                                   ['$us 400,000', 400000],
                                                   ['$us 500,000', 500000],
                                                   ['$us 600,000', 600000]] %>
                      </div>
                      <span class="input-range-indicator"></span>
                      <div class="facet-price-wrap">
                        <%= f.select :price_lteq, [['$us Maximo', 100000],
                                                   ['$us 100,000', 100000],
                                                   ['$us 200,000', 200000],
                                                   ['$us 300,000', 300000],
                                                   ['$us 400,000', 400000],
                                                   ['$us 500,000', 500000],
                                                   ['$us 600,000', 600000]] %>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
          <li class="dropdown facet-bd">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              <span>Dormitorios</span>
              <%= fa_icon "caret-down" %>
            </a>
            <ul class="dropdown-menu">
              <li data-value>
                <a href="#">...</a>
              </li>
              <li data-value="1">
                <a href="#">1+</a>
              </li>
              <li data-value="2">
                <a href="#">2+</a>
              </li>
              <li data-value="3">
                <a href="#">3+</a>
              </li>
              <li data-value="4">
                <a href="#">4+</a>
              </li>
              <li data-value="5">
                <a href="#">5+</a>
              </li>
            </ul>
          </li>
          <li class="dropdown facet-ba">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              <span>Baños</span>
              <%= fa_icon "caret-down" %>
            </a>
            <ul class="dropdown-menu">
              <li data-value>
                <a href="#">...</a>
              </li>
              <li data-value="1">
                <a href="#">1+</a>
              </li>
              <li data-value="2">
                <a href="#">2+</a>
              </li>
              <li data-value="3">
                <a href="#">3+</a>
              </li>
              <li data-value="4">
                <a href="#">4+</a>
              </li>
              <li data-value="5">
                <a href="#">5+</a>
              </li>
            </ul>
          </li>
          <li class=" dropdown facet-property-type">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              <span>Tipo de Propiedad</span>
              <%= fa_icon "caret-down" %>
            </a>
            <ul class="dropdown-menu">
              <li>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "apartamento", "" %>
                    Apartamento
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "casa", "" %>
                    Casa
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "penthouse", "" %>
                    Penthouse
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "villa", "" %>
                    Villa
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "oficina", "" %>
                    Oficina
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :kind_cont, {}, "local comercial", "" %>
                    Local Comercial
                  </label>
                </div>
              </li>
            </ul>
          </li>
          <li class="dropdown facet-morefilters">
            <a href="#" id="scroll" class="dropdown-toggle dropdown-toggle-mobile-footer hidden-sm hidden-md hidden-lg btn btn-default" data-toggle="dropdown" aria-expanded="false">
              <span data-role="facet-label">Filtro</span>
              <span id="filter-close">
                <%= fa_icon "times" %>
              </span>
            </a>
            <div class="dropdown-menu">
              <div class="facet-mobile-list hidden-lg hidden-md hidden-sm">
                <div class="container mobile-facet-price hidden-lg hidden-md hidden-sm">
                  <h5>Precio</h5>
                  <div class="row">
                    <div class="col-xs-12">
                      <div class="pull-left">
                        <div class="input-group facet-price-input">
                          <%= f.select :price_gteq, [['$us Minimo', 0],
                                                     ['$us 100,000', 100000],
                                                     ['$us 200,000', 200000],
                                                     ['$us 300,000', 300000],
                                                     ['$us 400,000', 400000],
                                                     ['$us 500,000', 500000],
                                                     ['$us 600,000', 600000]] %>
                        </div>
                      </div>
                      <span class="input-range-indicator"></span>
                      <div class="pull-left">
                        <div class="input-group facet-price-input">
                          <%= f.select :price_lteq, [['$us Maximo', 1000000],
                                                     ['$us 100,000', 100000],
                                                     ['$us 200,000', 200000],
                                                     ['$us 300,000', 300000],
                                                     ['$us 400,000', 400000],
                                                     ['$us 500,000', 500000],
                                                     ['$us 600,000', 600000]] %>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="container mobile-facet-beds">
                  <h5>Dormitorios</h5>
                  <div class="radio-btn-group radio-btn-group-justified">
                    <%= f.radio_button(:room_eq, "") %>
                    <%= f.label :room_eq, "...", id: "none" %>
                    <%= f.radio_button(:room_eq, "1") %>
                    <%= f.label :room_eq, "1+", id: "one" %>
                    <%= f.radio_button(:room_eq, "2") %>
                    <%= f.label :room_eq, "2+", id: "two" %>
                    <%= f.radio_button(:room_eq, "3") %>
                    <%= f.label :room_eq, "3+", id: "three" %>
                    <%= f.radio_button(:room_eq, "4") %>
                    <%= f.label :room_eq, "4+", id: "four" %>
                    <%= f.radio_button(:room_eq, "5") %>
                    <%= f.label :room_eq, "5+", id: "five" %>
                  </div>
                </div>
                <div class="container mobile-facet-baths">
                  <h5>Baños</h5>
                  <div class="radio-btn-group radio-btn-group-justified">
                    <%= f.radio_button(:bath_eq, "") %>
                    <%= f.label :bath_eq, "..." %>
                    <%= f.radio_button(:bath_eq, "1") %>
                    <%= f.label :bath_eq, "1+" %>
                    <%= f.radio_button(:bath_eq, "2") %>
                    <%= f.label :bath_eq, "2+" %>
                    <%= f.radio_button(:bath_eq, "3") %>
                    <%= f.label :bath_eq, "3+" %>
                    <%= f.radio_button(:bath_eq, "4") %>
                    <%= f.label :bath_eq, "4+" %>
                    <%= f.radio_button(:bath_eq, "5") %>
                    <%= f.label :bath_eq, "5+" %>
                  </div>
                </div>
                <div class=" container morefilters-property-type hidden-lg hidden-md">
                  <div class="row gutter-sm">
                    <div class="col-lg-10 col-lg-offset-1">
                      <div class="morefilters-row">
                        <div class="row gutter-sm">
                          <div class="col-md-2">
                            <h5>Tipo de Propiedad</h5>
                          </div>
                          <div class="col-md-9 col-sm-11">
                            <div id="facet-prop-type">
                              <div class="row">
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "apartamento", "" %>
                                      Apartamento
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "casa", "" %>
                                      Casa
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "penthouse", "" %>
                                      Penthouse
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "villa", "" %>
                                      Villa
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "oficina", "" %>
                                      Oficina
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="checkbox">
                                    <label>
                                      <%= f.check_box :kind_cont, {}, "local comercial", "" %>
                                      Local Comercial
                                    </label>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="morefilters-action">
                <div class="container link-secondary">
                  <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                      <div class="morefilters-action-btns">
                        <div class="row">

                          <div class="col-md-push-3 col-md-offset-3 col-md-3 col-sm-push-4  col-sm-offset-2 col-sm-4">
                            <%= f.submit class: "js-update-properties btn btn-primary btn-block btn-update-facet" do %>
                              <span>Buscar</span>
                            <% end %>

                          </div>
                          <div class="col-md-pull-3 col-md-3 col-sm-pull-4 col-sm-4">
                            <a href="#" class="btn btn-default btn-block btn-close-facet">Cancelar</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>

      <% end %>
    </div>
  </div>


  <%#= search_form_for @q, html: { style: "margin-bottom: 25px;" } do |f| %>

    <%#= f.label :price_gteq, "Precio Desde US$" %>
    <%#= f.number_field :price_gteq %>
    <%#= f.label :price_lteq, "Precio Hasta US$" %>
    <%#= f.number_field :price_lteq %>

    <%#= f.label :room_eq, "Habitaciones" %>
    <%#= f.select :room_eq, [['1 habitación', 1],
                         ['2 habitaciones', 2],
                         ['3 habitaciones', 3],
                         ['4 habitaciones', 4],
                         ['5 habitaciones', 5],
                         ['6 habitaciones', 6]] %>

    <%#= f.label :bath_eq, "Baños" %>
    <%#= f.select :bath_eq, [['1+', 1], ['2+', 2], ['3+', 3], ['4+', 4], ['5+', 5], ['6+', 6]] %>

    <%#= f.submit %>
    <%#= sort_link(@q, :price, 'Precio', default_order: :asc) %>
  <%# end %>


  <div class="container search-results">
    <header class="section_title">
      <h2>Duis mollisest non commodo luctus nisierat porttito</h2>
      <small>Vestibulum id ligula porta felis euismod semper</small>
    </header>
    <div class="row">
      <div class="col-sm-8 listings-list">
        <% @properties.each do |property| %>
          <div class="listings-grid-item">
            <%= link_to(property_url(property), class: "media") do %>
              <div class="listings-grid-main pull-left">
                <% if property.photos.first %>
                  <%= image_tag property.photos.first.image_url(:large, public: true) %>
                <% end %>
                <div class="listings-grid-price">
                  <%= number_to_currency(property.price, precision: 0, unit: "US$") %>
                </div>
              </div>
              <div class="media-body">
                <div class="listings-grid-body">
                  <small><%= property.name %></small>
                  <h5><%= property.address %></h5>
                </div>
                <ul class="listings-grid-attrs">
                  <li>
                    <%= fa_icon "bed" %>
                    <%= property.room %>
                  </li>
                  <li>
                    <%= fa_icon "bath" %>
                    <%= property.bath %>
                  </li>
                  <li>
                    <%= fa_icon "car" %>
                    <%= property.parking %>
                  </li>
                  <li class="pull-right">
                    <%= fa_icon "heart-o" %>
                  </li>
                </ul>
              </div>
            <% end %>
          </div>
        <% end %>
        <%= will_paginate %>
      </div>
      <aside class="col-sm-4 hidden-xs">
        <div class="card subscribe mdc-bg-light-blue">
          <div class="subscribe-icon">
            <%= fa_icon "envelope-o" %>
          </div>
          <h2>Subscribirse...</h2>
          <small>Así recibiras emails de nuevas publicaciones que te puedan interesar</small>
          <!-- Modify form -->
          <form>
            <div class="form-group form-group-light form-group-float form-group-active">
              <label>Email</label>
              <input type="text" class="form-control text-center" >
            </div>
            <button class="btn btn-circle">
              <i class="fa fa-check mdc-text-light-blue" aria-hidden="true"></i>
            </button>
          </form>
        </div>
      </aside>
    </div>
  </div>
</section>
